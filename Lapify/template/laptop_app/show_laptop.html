{% extends 'layout.html' %}

{% block title %}
<title>Available Stock</title>
{% endblock %}

{% block content %}

<style>
  /* Hover effect for cards */
  .hover-card {
    transition: transform 0.3s ease, box-shadow 0.3s ease;
    cursor: pointer;
  }
  .hover-card:hover {
    transform: translateY(-8px);
    box-shadow: 0 8px 20px rgba(0, 0, 0, 0.15);
  }

  /* Hidden details */
  .extra-details {
    display: none;
    margin-top: 10px;
  }
</style>

<div class="container my-5">
  <div class="row justify-content-center">
    <div class="col-12">

      <!-- Outer Card -->
      <div class="card shadow-lg border-0 rounded-4">

        <!-- Card Header -->
        <div class="card-header text-center text-white rounded-top-4"
             style="background: linear-gradient(135deg, #6c63ff, #3f3d9e);">
          <h3 class="mb-0 fw-bold">
            <i class="bi bi-laptop-fill me-2"></i> Available Stock
          </h3>
        </div>

        <!-- Card Body -->
        <div class="card-body p-4">

          <!-- Grid of Cards -->
          <div class="row g-4">
            {% for lap in laptop %}
              <div class="col-md-4 col-sm-6">
                <!-- Alternate background colors with hover -->
                <div class="card h-100 shadow-sm rounded-3 hover-card
                     {% if forloop.counter|divisibleby:2 %}
                       bg-light
                     {% else %}
                       bg-white
                     {% endif %}">

                  <!-- Image -->
                  {% if lap.image %}
                    <img src="{{ lap.image.url }}" alt="{{ lap.name }}"
                         class="card-img-top"
                         style="height:200px; object-fit:cover; border-radius:8px 8px 0 0;">
                  {% else %}
                    <img src="https://via.placeholder.com/200"
                         class="card-img-top"
                         style="border-radius:8px 8px 0 0;"
                         alt="No image">
                  {% endif %}

                  <!-- Card Body -->
                  <div class="card-body">
                    <h5 class="card-title fw-bold">{{ lap.company }}</h5>
                    <p class="card-text mb-1"><strong>RAM:</strong> {{ lap.ram }} GB</p>
                    <p class="card-text mb-1"><strong>Storage:</strong> {{ lap.storage }} GB</p>
                    <p class="card-text mb-1"><strong>Color:</strong> {{ lap.color }}</p>

                    {% if lap.stock > 0 %}
                      <span class="badge bg-success px-3 py-2">In Stock</span>
                    {% else %}
                      <span class="badge bg-danger px-3 py-2">Out of Stock</span>
                    {% endif %}

                    <p class="card-text mt-2"><strong>Price:</strong> â‚¹{{ lap.price }}</p>

                    <!-- Extra hidden details -->
                    <div class="extra-details">
                      <p class="card-text"><strong>Processor:</strong>925</p>
                      <p class="card-text"><strong>Graphics:</strong>4D</p>
                      <p class="card-text"><strong>Screen Size:</strong>24 inch</p>
                      <p class="card-text"><strong>Battery:</strong> 20000mAh</p>
                    </div>

                    <!-- Show More button -->
                    <button class="btn btn-link p-0 mt-2 toggle-btn" type="button">
                      Show More
                    </button>
                  </div>

                  <!-- Card Footer -->
                  <div class="card-footer bg-transparent d-flex justify-content-between">
                    <a class="btn btn-warning btn-sm" href="{% url 'update' lap.id %}">
                      <i class="bi bi-pencil-square"></i> Update
                    </a>
                    <a class="btn btn-danger btn-sm" href="{% url 'delete' lap.id %}">
                      <i class="bi bi-trash3"></i> Delete
                    </a>
                  </div>
                </div>
              </div>
            {% endfor %}
          </div>

          <!-- Add New Button -->
          <div class="text-center mt-5">
            <a class="btn btn-primary px-4 py-2 shadow-sm" href="{% url 'add' %}">
              <i class="bi bi-plus-circle me-1"></i> Add New
            </a>
          </div>

        </div>
      </div>

    </div>
  </div>
</div>

<!-- JavaScript for toggling -->
<script>
  document.addEventListener("DOMContentLoaded", function () {
    const buttons = document.querySelectorAll(".toggle-btn");
    buttons.forEach(btn => {
      btn.addEventListener("click", function () {
        const details = this.previousElementSibling; // extra-details div
        if (details.style.display === "none" || details.style.display === "") {
          details.style.display = "block";
          this.textContent = "Show Less";
        } else {
          details.style.display = "none";
          this.textContent = "Show More";
        }
      });
    });
  });
</script>

{% endblock %}
